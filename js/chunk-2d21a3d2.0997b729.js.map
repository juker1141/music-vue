{"version":3,"sources":["webpack:///./src/views/Home.vue","webpack:///./src/components/SongItem.vue","webpack:///./src/components/SongItem.vue?2e1a","webpack:///./src/directives/icon-secondary.js","webpack:///./src/views/Home.vue?f63c"],"names":["class","style","src","id","$t","songs","song","key","docID","to","modifiedName","displayName","custom","navigate","commentCount","name","props","__exports__","beforeMount","el","binding","iconClass","value","icon","arg","right","innerHTML","components","AppSongItem","directives","data","maxPerPage","peddingRequest","methods","getSongs","length","doc","get","lastDoc","orderBy","startAfter","limit","snapshots","forEach","document","push","handleScroll","documentElement","scrollTop","offsetHeight","window","innerHeight","bottomOfWindow","Math","round","this","created","addEventListener","beforeUnmount","removeEventListener","render"],"mappings":"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","file":"js/chunk-2d21a3d2.0997b729.js","sourcesContent":["<template>\n  <main>\n    <!-- Introduction -->\n    <section class=\"mb-8 py-20 text-white text-center relative\">\n      <div\n        class=\"absolute inset-0 w-full h-full introduction-bg bg-cover\"\n        style=\"background-image: url(assets/img/header.png)\"\n      ></div>\n      <div class=\"container mx-auto\">\n        <div class=\"text-white main-header-content\">\n          <h1 class=\"font-bold text-5xl mb-5\">{{ $t(\"home.listen\") }}!</h1>\n          <p class=\"w-full md:w-8/12 mx-auto\">\n            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus\n            et dolor mollis, congue augue non, venenatis elit. Nunc justo eros,\n            suscipit ac aliquet imperdiet, venenatis et sapien. Duis sed magna\n            pulvinar, fringilla lorem eget, ullamcorper urna.\n          </p>\n        </div>\n      </div>\n\n      <img\n        class=\"relative block mx-auto mt-5 -mb-20 w-auto max-w-full\"\n        src=\"assets/img/introduction-music.png\"\n      />\n    </section>\n\n    <!-- Main Content -->\n    <section class=\"container mx-auto\">\n      <div\n        class=\"bg-white rounded border border-gray-200 relative flex flex-col\"\n      >\n        <div\n          class=\"px-6 pt-6 pb-5 font-bold border-b border-gray-200\"\n          v-icon-secondary=\"{ icon: 'headphones-alt', right: true }\"\n        >\n          <span class=\"card-title\">Songs</span>\n          <!-- Icon -->\n        </div>\n        <!-- Playlist -->\n        <ol id=\"playlist\">\n          <AppSongItem v-for=\"song in songs\" :key=\"song.docID\" :song=\"song\" />\n        </ol>\n        <!-- .. end Playlist -->\n      </div>\n    </section>\n  </main>\n</template>\n\n<script>\nimport { songsCollection } from \"@/includes/firebase\";\nimport AppSongItem from \"@/components/SongItem.vue\";\nimport IconSecondary from \"@/directives/icon-secondary\";\n\nexport default {\n  name: \"Home\",\n  components: {\n    AppSongItem,\n  },\n  // 在此component 上註冊 v-test 標籤\n  directives: {\n    \"icon-secondary\": IconSecondary,\n  },\n  data() {\n    return {\n      songs: [],\n      maxPerPage: 25,\n      peddingRequest: false,\n    };\n  },\n  methods: {\n    async getSongs() {\n      // 為防止用戶不停執行該非同步行為，增加一個阻擋判斷\n      if (this.peddingRequest) {\n        return;\n      }\n\n      this.peddingRequest = true;\n\n      let snapshots;\n\n      // 判斷是不是第一次撈資料\n      // 若為 true，則執行 else 不會去執行 starAfter 這個搜尋的動作\n      // 若為 false，則執行只搜尋剩餘資料的動作\n      if (this.songs.length) {\n        // 取得第一次得到資料中的最後一筆文檔\n        const lastDoc = await songsCollection\n          .doc(this.songs[this.songs.length - 1].docID)\n          .get();\n\n        // orderBy 是對取得的資料進行排序\n        // starAfter 可以用文檔來搜尋該文檔\"以後的\"資料，參數為最後一個已有的文檔\n        // limit 會限制取得的資料數量，參數可以帶入要取得的資料數量\n        // get 是最後取得資料時會呼叫的動作\n        snapshots = await songsCollection\n          .orderBy(\"modifiedName\")\n          .startAfter(lastDoc)\n          .limit(this.maxPerPage)\n          .get();\n      } else {\n        snapshots = await songsCollection\n          .orderBy(\"modifiedName\")\n          .limit(this.maxPerPage)\n          .get();\n      }\n\n      snapshots.forEach((document) => {\n        this.songs.push({\n          docID: document.id,\n          ...document.data(),\n        });\n      });\n\n      this.peddingRequest = false;\n    },\n    handleScroll() {\n      const { scrollTop, offsetHeight } = document.documentElement;\n      const { innerHeight } = window;\n      const bottomOfWindow = Math.round(scrollTop) + innerHeight === offsetHeight;\n\n      if (bottomOfWindow) this.getSongs();\n    },\n  },\n  async created() {\n    this.getSongs();\n\n    window.addEventListener(\"scroll\", this.handleScroll);\n  },\n  beforeUnmount() {\n    window.removeEventListener(\"scroll\", this.handleScroll);\n  },\n};\n</script>\n","<template>\n  <li\n    class=\"flex justify-between items-center p-3 pl-6 cursor-pointer transition duration-300 hover:bg-gray-50\"\n    :id=\"`song-id-${song.docID}`\"\n  >\n    <div>\n      <!-- name為基礎路由 params為要帶入的參數 -->\n      <!-- 結果會是 /song/:id -->\n      <router-link\n        :to=\"{ name: 'song', params: { id: song.docID } }\"\n        class=\"font-bold block text-gray-600\"\n      >\n        {{ song.modifiedName }}\n      </router-link>\n      <span class=\"text-gray-500 text-sm\">\n        {{ song.displayName }}\n      </span>\n    </div>\n\n    <div class=\"text-gray-600 text-lg\">\n      <router-link\n        custom\n        :to=\"{ name: 'song', params: { id: song.docID }, hash: '#comments' }\"\n        v-slot=\"{ navigate }\"\n      >\n        <span class=\"comments\" @click=\"navigate\">\n          <i class=\"fa fa-comments text-gray-600\"></i>\n          {{ song.commentCount }}\n        </span>\n      </router-link>\n    </div>\n  </li>\n</template>\n\n<script>\nexport default {\n  name: \"SongItem\",\n  props: [\"song\"],\n};\n</script>\n","import { render } from \"./SongItem.vue?vue&type=template&id=134c651f\"\nimport script from \"./SongItem.vue?vue&type=script&lang=js\"\nexport * from \"./SongItem.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\tu230\\\\Desktop\\\\music-vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export default {\n  beforeMount(el, binding) {\n    let iconClass = `fa fa-${binding.value.icon} text-green-400 text-xl`;\n\n    if (binding.arg === \"full\") {\n      iconClass = binding.value;\n    }\n\n    if (binding.value.right) {\n      iconClass += \" float-right\";\n    }\n\n    // if (binding.modifiers.yellow) {\n    //   iconClass += \" text-yellow-400\";\n    // } else {\n    //   iconClass += \" text-green-400\";\n    // }\n\n    // eslint-disable-next-line no-param-reassign\n    el.innerHTML += `<i class=\"${iconClass}\"></i>`;\n  },\n};\n","import { render } from \"./Home.vue?vue&type=template&id=0199d8ad\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\tu230\\\\Desktop\\\\music-vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}