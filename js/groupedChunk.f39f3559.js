(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["groupedChunk"],{"04d1":function(e,t,n){var r=n("342f"),o=r.match(/firefox\/(\d+)/i);e.exports=!!o&&+o[1]},"25f0":function(e,t,n){"use strict";var r=n("e330"),o=n("5e77").PROPER,c=n("6eeb"),a=n("825a"),s=n("3a9b"),i=n("577e"),u=n("d039"),d=n("ad6d"),b="toString",l=RegExp.prototype,m=l[b],f=r(d),g=u((function(){return"/a/b"!=m.call({source:"a",flags:"b"})})),h=o&&m.name!=b;(g||h)&&c(RegExp.prototype,b,(function(){var e=a(this),t=i(e.source),n=e.flags,r=i(void 0===n&&s(l,e)&&!("flags"in l)?f(e):n);return"/"+t+"/"+r}),{unsafe:!0})},"4e82":function(e,t,n){"use strict";var r=n("23e7"),o=n("e330"),c=n("59ed"),a=n("7b0b"),s=n("07fa"),i=n("577e"),u=n("d039"),d=n("addb"),b=n("a640"),l=n("04d1"),m=n("d998"),f=n("2d00"),g=n("512c"),h=[],p=o(h.sort),O=o(h.push),j=u((function(){h.sort(void 0)})),v=u((function(){h.sort(null)})),x=b("sort"),w=!u((function(){if(f)return f<70;if(!(l&&l>3)){if(m)return!0;if(g)return g<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)h.push({k:t+r,v:n})}for(h.sort((function(e,t){return t.v-e.v})),r=0;r<h.length;r++)t=h[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}})),y=j||!v||!x||!w,k=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:i(t)>i(n)?1:-1}};r({target:"Array",proto:!0,forced:y},{sort:function(e){void 0!==e&&c(e);var t=a(this);if(w)return void 0===e?p(t):p(t,e);var n,r,o=[],i=s(t);for(r=0;r<i;r++)r in t&&O(o,t[r]);d(o,k(e)),n=o.length,r=0;while(r<n)t[r]=o[r++];while(r<i)delete t[r++];return t}})},"512c":function(e,t,n){var r=n("342f"),o=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!o&&+o[1]},"8dc3":function(e,t,n){"use strict";n.r(t);n("4e82"),n("b0c0");var r=n("7a23"),o={class:"w-full mb-8 py-14 text-center text-white relative"},c=Object(r["h"])("div",{class:"absolute inset-0 w-full h-full box-border bg-contain music-bg",style:{"background-image":"url(/assets/img/song-header.png)"}},null,-1),a={class:"container mx-auto flex items-center"},s={class:"z-50 text-left ml-8"},i={class:"text-3xl font-bold"},u={class:"song-price"},d={class:"container mx-auto mt-6",id:"comments"},b={class:"bg-white rounded border border-gray-200 relative flex flex-col"},l={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},m={class:"card-title"},f=Object(r["h"])("i",{class:"fa fa-comments float-right text-green-400 text-2xl"},null,-1),g={class:"p-6"},h=["disabled"],p=Object(r["h"])("option",{value:"1"},"Latest",-1),O=Object(r["h"])("option",{value:"2"},"Oldest",-1),j=[p,O],v={class:"container mx-auto"},x={class:"mb-5"},w={class:"font-bold"};function y(e,t,n,p,O,y){var k=Object(r["G"])("VeeField"),A=Object(r["G"])("ErrorMessage"),C=Object(r["G"])("VeeForm");return Object(r["A"])(),Object(r["g"])("main",null,[Object(r["h"])("section",o,[c,Object(r["h"])("div",a,[Object(r["h"])("button",{type:"button",class:"z-50 p-8 text-3xl bg-white text-black rounded-full focus:outline-none flex items-center justify-center",onClick:t[0]||(t[0]=Object(r["U"])((function(t){return e.newSong(O.song)}),["prevent"]))},[Object(r["h"])("i",{class:Object(r["t"])(["fas",{"fa-play":!e.playing,"fa-pause":e.playing}])},null,2)]),Object(r["h"])("div",s,[Object(r["h"])("div",i,Object(r["K"])(O.song.modifiedName),1),Object(r["h"])("div",null,Object(r["K"])(O.song.genre),1),Object(r["h"])("div",u,Object(r["K"])(e.$n(1,"currency")),1)])])]),Object(r["h"])("section",d,[Object(r["h"])("div",b,[Object(r["h"])("div",l,[Object(r["h"])("span",m,Object(r["K"])(e.$tc("song.commentCount",O.song.commentCount,{count:O.song.commentCount})),1),f]),Object(r["h"])("div",g,[O.commentShowAlert?(Object(r["A"])(),Object(r["g"])("div",{key:0,class:Object(r["t"])(["text-white text-center font-bold p-4 mb-4",O.commentAlertVariant])},Object(r["K"])(O.commentAlertMessage),3)):Object(r["f"])("",!0),e.userLoggedIn?(Object(r["A"])(),Object(r["e"])(C,{key:1,"validation-schema":O.schema,onSubmit:y.addComment},{default:Object(r["S"])((function(){return[Object(r["k"])(k,{as:"textarea",name:"comment",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded mb-4",placeholder:"Your comment here..."}),Object(r["k"])(A,{class:"text-red-600",name:"comment"}),Object(r["h"])("button",{disabled:O.commentInSubmission,type:"submit",class:"py-1.5 px-3 rounded text-white bg-green-600 block"}," Submit ",8,h)]})),_:1},8,["validation-schema","onSubmit"])):Object(r["f"])("",!0),Object(r["T"])(Object(r["h"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return O.sort=e}),class:"block mt-4 py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded"},j,512),[[r["N"],O.sort]])])])]),Object(r["h"])("ul",v,[(Object(r["A"])(!0),Object(r["g"])(r["a"],null,Object(r["F"])(y.sortedComments,(function(e){return Object(r["A"])(),Object(r["g"])("li",{class:"p-6 bg-gray-50 border border-gray-200",key:e.docID},[Object(r["h"])("div",x,[Object(r["h"])("div",w,Object(r["K"])(e.name),1),Object(r["h"])("time",null,Object(r["K"])(e.datePosted),1)]),Object(r["h"])("p",null,Object(r["K"])(e.content),1)])})),128))])])}var k=n("1da1"),A=n("5530"),C=(n("96cf"),n("fb6a"),n("d3b7"),n("25f0"),n("159b"),n("5502")),S=n("b79f"),I={name:"Song",data:function(){return{song:{},schema:{comment:"required|min:3"},commentInSubmission:!1,commentShowAlert:!1,commentAlertVariant:"bg-blue-500",commentAlertMessage:"Please wait! Your comment is being submitted",comments:[],sort:"1"}},computed:Object(A["a"])(Object(A["a"])(Object(A["a"])({},Object(C["e"])({userLoggedIn:function(e){return e.auth.userLoggedIn}})),Object(C["c"])(["playing"])),{},{sortedComments:function(){var e=this;return this.comments.slice().sort((function(t,n){return"1"===e.sort?new Date(n.datePosted)-new Date(t.datePosted):new Date(t.datePosted)-new Date(n.datePosted)}))}}),watch:{sort:function(e){e!==this.$route.query.sort&&this.$router.push({query:{sort:e}})}},methods:Object(A["a"])(Object(A["a"])({},Object(C["b"])(["newSong"])),{},{addComment:function(e,t){var n=this;return Object(k["a"])(regeneratorRuntime.mark((function r(){var o,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=t.resetForm,n.commentInSubmission=!0,n.commentShowAlert=!0,n.commentAlertVariant="bg-blue-500",n.commentAlertMessage="Please wait! Your comment is being submitted.",c={content:e.comment,datePosted:(new Date).toString(),sid:n.$route.params.id,name:S["a"].currentUser.displayName,uid:S["a"].currentUser.uid},r.next=8,S["b"].add(c);case 8:return n.song.commentCount+=1,r.next=11,S["c"].doc(n.$route.params.id).update({commentCount:n.song.commentCount});case 11:n.getComments(),n.commentInSubmission=!1,n.commentAlertVariant="bg-green-500",n.commentAlertMessage="Comment added!",o();case 16:case"end":return r.stop()}}),r)})))()},getComments:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,S["b"].where("sid","==",e.$route.params.id).get();case 2:n=t.sent,e.comments=[],n.forEach((function(t){e.comments.push(Object(A["a"])({docID:t.id},t.data()))}));case 5:case"end":return t.stop()}}),t)})))()}}),beforeRouteEnter:function(e,t,n){return Object(k["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,S["c"].doc(e.params.id).get();case 2:r=t.sent,n((function(e){if(r.exists){var t=e.$route.query.sort;e.sort="1"===t||"2"===t?t:"1",e.song=r.data(),e.getComments()}else e.$router.push({name:"home"})}));case 4:case"end":return t.stop()}}),t)})))()}},R=n("6b0d"),K=n.n(R);const P=K()(I,[["render",y]]);t["default"]=P},addb:function(e,t,n){var r=n("4dae"),o=Math.floor,c=function(e,t){var n=e.length,i=o(n/2);return n<8?a(e,t):s(e,c(r(e,0,i),t),c(r(e,i),t),t)},a=function(e,t){var n,r,o=e.length,c=1;while(c<o){r=c,n=e[c];while(r&&t(e[r-1],n)>0)e[r]=e[--r];r!==c++&&(e[r]=n)}return e},s=function(e,t,n,r){var o=t.length,c=n.length,a=0,s=0;while(a<o||s<c)e[a+s]=a<o&&s<c?r(t[a],n[s])<=0?t[a++]:n[s++]:a<o?t[a++]:n[s++];return e};e.exports=c},d998:function(e,t,n){var r=n("342f");e.exports=/MSIE|Trident/.test(r)},fb6a:function(e,t,n){"use strict";var r=n("23e7"),o=n("da84"),c=n("e8b5"),a=n("68ee"),s=n("861d"),i=n("23cb"),u=n("07fa"),d=n("fc6a"),b=n("8418"),l=n("b622"),m=n("1dde"),f=n("f36a"),g=m("slice"),h=l("species"),p=o.Array,O=Math.max;r({target:"Array",proto:!0,forced:!g},{slice:function(e,t){var n,r,o,l=d(this),m=u(l),g=i(e,m),j=i(void 0===t?m:t,m);if(c(l)&&(n=l.constructor,a(n)&&(n===p||c(n.prototype))?n=void 0:s(n)&&(n=n[h],null===n&&(n=void 0)),n===p||void 0===n))return f(l,g,j);for(r=new(void 0===n?p:n)(O(j-g,0)),o=0;g<j;g++,o++)g in l&&b(r,o,l[g]);return r.length=o,r}})}}]);
//# sourceMappingURL=groupedChunk.f39f3559.js.map